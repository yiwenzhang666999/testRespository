define(["map","style"],function(e,c){var d;var a;var b;function f(h,g,j){if(h==d){return}if(h){var i=j.clone();a=new ol.layer.Vector({zIndex:9999999,source:new ol.source.Vector({features:new ol.Collection([i])}),style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#00c2ff",width:3}),image:new ol.style.Circle({radius:4,fill:new ol.style.Fill({color:"#ffcc33"})})})});a.setMap(e.getMap());b=new ol.interaction.Modify({source:a.getSource(),features:new ol.Collection([i]),style:c.getDefaultStyleFunction(),pixelTolerance:3});e.getMap().addInteraction(b);b.on("modifyend",function(k){var l=k.features.getArray()[0];g(l)})}else{if(a){a.getSource().clear();e.getMap().removeLayer(a)}if(b){b.setActive(h);e.getMap().removeInteraction(b)}a=null;b=null}d=h;$("#map").addClass("noTrack")}return{setActive:f}});